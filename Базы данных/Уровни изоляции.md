```go
	Стандарт SQL определяет четыре уровня изоляции транзакций. Наиболее строгий из них — сериализуемый, определяется одним абзацем, говорящем, что при параллельном выполнении несколько сериализуемых транзакций должны гарантированно выдавать такой же результат, как если бы они запускались по очереди в некотором порядке. 
	Остальные три уровня определяются через описания особых явлений, которые возможны при взаимодействии параллельных транзакций, но не допускаются на определённом уровне. Как отмечается в стандарте, из определения сериализуемого уровня вытекает, что на этом уровне ни одно из этих явлений не возможно.
```

#### Особые условия, недопустимые для различных уровней изоляции

```go
`грязное чтение`

Транзакция читает данные, записанные параллельной незавершённой транзакцией.
- Грязное чтение происходит, когда одна транзакция читает данные, которые другая транзакция изменила, но еще не зафиксировала (не сделала commit).
- Проблема: Если вторая транзакция откатится (rollback), первая транзакция будет работать с данными, которые никогда не существовали в базе данных.

`неповторяемое чтение`

Транзакция повторно читает те же данные, что и раньше, и обнаруживает, что они были изменены другой транзакцией (которая завершилась после первого чтения).
- Неповторяемое чтение происходит, когда одна транзакция читает данные дважды и получает разные результаты, потому что другая транзакция изменила эти данные между двумя чтениями.
- Проблема: Это может привести к несогласованности данных, так как одна транзакция видит изменения, сделанные другой транзакцией.

`фантомное чтение`

Транзакция повторно выполняет запрос, возвращающий набор строк для некоторого условия, и обнаруживает, что набор строк, удовлетворяющих условию, изменился из-за транзакции, завершившейся за это время.
- Фантомное чтение происходит, когда одна транзакция читает набор данных дважды и получает разные результаты, потому что другая транзакция добавила или удалила строки между двумя чтениями.
- Проблема: Это может привести к несогласованности данных, так как одна транзакция видит изменения, сделанные другой транзакцией.

`аномалия сериализации`

Результат успешной фиксации группы транзакций оказывается несогласованным при всевозможных вариантах исполнения этих транзакций по очереди.
- Аномалия сериализации происходит, когда транзакции выполняются параллельно, и их результаты не соответствуют результатам, которые были бы получены, если бы транзакции выполнялись последовательно.
- Проблема: Это может привести к несогласованности данных и нарушению целостности базы данных.

```

![[Attachments/Pasted image 20240922165711.png]]

## Уровни изоляции

Уровень изоляции — это настройка, которая определяет, как транзакции в базе данных видят изменения, сделанные другими транзакциями. Это помогает избежать проблем, таких как грязное чтение, неповторяемое чтение и фантомное чтение.

```
`Read uncommitted`
это самый низкий уровень изоляции. Он позволяет транзакциям видеть изменения, сделанные другими транзакциями, даже если эти изменения еще не зафиксированы (не сделаны commit).

Когда использовать Read Uncommitted?
- Высокая производительность: Когда важна скорость и вы можете позволить себе некоторую неточность данных.
- Отчеты и аналитика: Когда данные используются для создания отчетов или аналитики, где точность данных не так критична.
```

1. turtle
2. escape
3. sunny
4. pond
5. donor
6. deal
7. sniff
8. what
9. such
10. name
11. attend
12. solar
как отменить транзакцию

```
`Read committed`
позволяет транзакциям видеть только те изменения, которые были зафиксированы (сделаны commit) другими транзакциями. Этот уровень изоляции предотвращает грязное чтение, но допускает неповторяемое чтение и фантомное чтение.

Когда использовать Read Committed?
- Средняя изоляция: Когда вам нужно предотвратить грязное чтение, но вы можете позволить себе неповторяемое и фантомное чтение.
- Баланс между производительностью и целостностью данных: Когда вам нужно найти баланс между производительностью и целостностью данных.

```

```go
`Repeatable read`
это уровень изоляции, который гарантирует, что если транзакция читает данные дважды, она получит одинаковые результаты, даже если другие транзакции изменили эти данные между двумя чтениями. Этот уровень изоляции предотвращает грязное чтение и неповторяемое чтение, но допускает фантомное чтение.

Когда использовать Repeatable Read?
- Высокая целостность данных: Когда вам нужно гарантировать, что данные, прочитанные транзакцией, не изменятся другими транзакциями до завершения текущей транзакции.
- Критические операции: Когда важна точность данных и вы не можете позволить себе неповторяемое чтение.
```

```go
`Serializable`
это самый строгий уровень изоляции. Он гарантирует, что транзакции выполняются так, как если бы они были выполнены последовательно (одна за другой), даже если они на самом деле выполняются параллельно. Этот уровень изоляции предотвращает грязное чтение, неповторяемое чтение и фантомное чтение.

Когда использовать Serializable?
- Высокая целостность данных: Когда вам нужно гарантировать, что транзакции выполняются так, как если бы они были выполнены последовательно, и избежать всех возможных проблем с изоляцией.
- Критические операции: Когда работаете с финансовыми данными или другими критически важными данными, где точность и целостность данных имеют первостепенное значение.
```

